<p class="backorder-notification">
    {% for variant in product.variants %}
      {% if variant.metafields.backorder.backorder_date %}
  
        {% assign month = variant.metafields.backorder.backorder_date |  slice:0, 2 %}
        {% assign day = variant.metafields.backorder.backorder_date |  slice:3, 2 %}
      {% assign year = variant.metafields.backorder.backorder_date | slice:6, 4 %}
        {% assign specific_date = variant.metafields.backorder.backorder_date | date: "%Y-%m-%d" | date: '%s' %}
        {% assign today_date = 'now' | date: "%s" %}
  
        {% capture date_new %}{{ day }}-{{ month }}-{{ year }}{% endcapture %}
  
  
        {% assign date_new = date_new | date: '%s' %}
  
  
        {% if date_new > today_date %}
          <span class="backorder-wrapper" id=bs-{{ variant.id }} {% if variant != current_variant %}style="display: none;"{% endif %}>{{ settings.backstock_intro }}
            <span class="backorder-date"> {{ variant.metafields.backorder.backorder_date }}</span>
            <span class="tts tts-wrap tooltip-wrapper" aria-label="{{ settings.backstock_tooltip }}">
              <img aria-hidden="true" focusable="false" role="presentation" class="icon icon-tooltip tooltip-image" src="{{ settings.backstock_icon | img_url }}">
              {% comment %}<svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-tooltip tooltip-image" viewBox="0 0 100 100"><g><path d="M50,29.7c-2,0-3.3,1.4-3.3,3.2c0,1.8,1.3,3.3,3.2,3.3h0.1c2,0,3.3-1.5,3.3-3.3C53.2,31.2,52,29.7,50,29.7z"></path><rect x="47.5" y="41.4" width="5.1" height="27.9"></rect><path d="M50,16.8c-18.3,0-33.2,14.9-33.2,33.2c0,18.3,14.9,33.2,33.2,33.2c18.3,0,33.2-14.9,33.2-33.2C83.2,31.7,68.3,16.8,50,16.8   z M50,78.2c-15.6,0-28.2-12.7-28.2-28.2S34.4,21.8,50,21.8S78.2,34.4,78.2,50S65.6,78.2,50,78.2z"></path></g></svg>{% endcomment %}
            </span>
          </span>
        {% endif %}
      {% endif %}
    {% endfor %}
  </p>
  
  <div class="backorder-message">
    {% for variant in product.variants %}
      {% if variant.metafields.backorder.backorder_message %}
  
        {% assign month = variant.metafields.backorder.backorder_date |  slice:0, 2 %}
        {% assign day = variant.metafields.backorder.backorder_date |  slice:3, 2 %}
      {% assign year = variant.metafields.backorder.backorder_date | slice:6, 4 %}
        {% assign specific_date = variant.metafields.backorder.backorder_date | date: "%Y-%m-%d" | date: '%s' %}
        {% assign today_date = 'now' | date: "%s" %}
  
        {% capture date_new %}{{ day }}-{{ month }}-{{ year }}{% endcapture %}
  
        {%- assign date_new = date_new | date: '%s' -%}
  
        {% if date_new > today_date %}
          <div class="backorder-mes" id=bm-{{ variant.id }} {% if variant != current_variant %}style="display: none;"{% endif %}>{{ variant.metafields.backorder.backorder_message }}</div>
        {% endif %}
      {% endif %}
    {% endfor %}
  </div>
  
  <div class="variant-message">
    {% for variant in product.variants %}
      {% if variant.metafields.message.variant_message %}
        <div class="variant-mes" id=vm-{{ variant.id }} {% if variant != current_variant %}style="display: none;"{% endif %}>{{ variant.metafields.message.variant_message }}</div>
      {% endif %}
    {% endfor %}
  </div> 